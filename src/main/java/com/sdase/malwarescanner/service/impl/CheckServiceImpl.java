package com.sdase.malwarescanner.service.impl;

import com.sdase.malwarescanner.entity.Check;
import com.sdase.malwarescanner.entity.File;
import com.sdase.malwarescanner.exception.ResourceNotFoundException;
import com.sdase.malwarescanner.repository.CheckRepository;
import com.sdase.malwarescanner.service.CheckService;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
@Transactional
public class CheckServiceImpl implements CheckService {

    private CheckRepository repository;

    public CheckServiceImpl(CheckRepository repository) {
        this.repository = repository;
    }

    @Override
    public Check getByNameAndFile(String name, File file) {
        return repository.findByName(name).
                orElseThrow(() -> new ResourceNotFoundException(String.format("Check with name:%s and file code: %s not found", name, file.getCode())));
    }

    @Override
    public void addOrEdit(Check entity) {
        repository.save(entity);
    }
}
