# Malware Scanner Facade

This spring boot application serves as an interface to other services of the SDA platform to scan files for malware. Externally, it simplifies the use of the malware scanner. Internally, it protects the knowledge of how to use the individual checks of the malware scanner.


## Prerequisites

### JDK 8
Install JDK 8 from  [Oracle](https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html "Download JDK")

### Maven
Install Maven from [Maven](https://maven.apache.org/install.html "Download Maven")

### Docker (optional)
Install Maven from [Docker](https://docs.docker.com/get-docker/ "Download Docker")

## Installation and running
### Without Docker
run blow commands in order:

```git clone https://github.com/mehran-mehrafarin/malware-scanner.git```

```cd malware-scanner```

```mvn spring-boot:run```

### With Docker
run blow commands in order:

```git clone https://github.com/mehran-mehrafarin/malware-scanner.git```

```cd malware-scanner.```

```mvn clean package```

```docker build -t malware-scanner:v-01 .``` (dot at the end of the command is important)

Now your docker image is ready.

## Get started

### Start Zookeeper
- `bin/zookeeper-server-start.sh config/zookeeper.properties`

### Start Kafka Server
- `bin/kafka-server-start.sh config/server.properties`

### Create Kafka Topic
- `bin/kafka-topics.sh --create --bootstrap-server localhost:2181 --replication-factor 1 --partitions 1 --topic KAFKA_FIRST_TOPIC`
- `bin/kafka-topics.sh --create --bootstrap-server localhost:2181 --replication-factor 1 --partitions 1 --topic KAFKA_SECOND_TOPIC`
- `bin/kafka-topics.sh --create --bootstrap-server localhost:2181 --replication-factor 1 --partitions 1 --topic KAFKA_THIRD_TOPIC`

### Publish to the Kafka Topic via Console
- `bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic KAFKA_FIRST_TOPIC --from-beginning`
- `bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic KAFKA_SECOND_TOPIC --from-beginning`
- `bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic KAFKA_THIRD_TOPIC --from-beginning`

### Calling the APIs
You can use ```malware-scanner.postman_collection.json``` file to see all the APIs.
 Check this file to see complete URL path: 

For login call the `/sign-in` API with POST method and in the body set `{'username' :'admin', 'password' :'admin'}` it will return a JWT token in the header with `access_token` key name.
and then copy this token in the post man environment with as `token` key.